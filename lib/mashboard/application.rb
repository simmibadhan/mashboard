require 'sinatra/base'
require 'httparty'

# Mashboard App
class Mashboard::Application < Sinatra::Base
  # Get homepgage
  get '/' do
    # @base_url = 'http://139.59.234.200:5288'
    @host_name = 'msg.kulcare.com'
    # @mongooseim_metrics = HTTParty.get(base_url + '/api/metrics/host/' + host_name)
    @mongooseim_metrics = {"metrics":{"adhoc_local_commands":{"count":0,"one":0},"adhoc_local_items":{"count":2,"one":0},"amp_determine_strategy":{"count":0,"one":0},"anonymous_purge_hook":{"count":0,"one":0},"backends.auth.authorize":{"n":0,"mean":0,"min":0,"max":0,"median":0,"50":0,"75":0,"90":0,"95":0,"99":0,"999":0},"backends.auth.check_password":{"n":0,"mean":0,"min":0,"max":0,"median":0,"50":0,"75":0,"90":0,"95":0,"99":0,"999":0},"backends.auth.does_user_exist":{"n":0,"mean":0,"min":0,"max":0,"median":0,"50":0,"75":0,"90":0,"95":0,"99":0,"999":0},"backends.auth.try_register":{"n":0,"mean":0,"min":0,"max":0,"median":0,"50":0,"75":0,"90":0,"95":0,"99":0,"999":0},"c2s_stream_features":{"count":30,"one":0},"c2s_unauthenticated_iq":{"count":0,"one":0},"disco_info":{"count":11,"one":0},"disco_local_features":{"count":9,"one":0},"disco_local_identity":{"count":9,"one":0},"disco_local_items":{"count":11,"one":0},"disco_sm_features":{"count":0,"one":0},"disco_sm_identity":{"count":0,"one":0},"disco_sm_items":{"count":0,"one":0},"failed_to_store_message":{"count":0,"one":0},"get_key":{"count":20,"one":0},"host_config_update":{"count":0,"one":0},"local_send_to_resource_hook":{"count":0,"one":0},"mam_lookup_messages":{"count":0,"one":0},"mam_muc_archive_id":{"count":1,"one":0},"mam_muc_archive_size":{"count":0,"one":0},"modCSIActive":{"count":0,"one":0},"modCSIInactive":{"count":0,"one":0},"modMamArchiveRemoved":{"count":0,"one":0},"modMamArchived":{"count":0,"one":0},"modMamDropped":{"count":0,"one":0},"modMamDropped2":{"count":0,"one":0},"modMamDroppedIQ":{"count":0,"one":0},"modMamFlushed":{"count":0,"one":0},"modMamForwarded":{"count":0,"one":0},"modMamLookups":{"count":0,"one":0},"modMamMultiplePurges":{"count":0,"one":0},"modMamPrefsGets":{"count":0,"one":0},"modMamPrefsSets":{"count":0,"one":0},"modMamSinglePurges":{"count":0,"one":0},"modMucMamArchiveRemoved":{"count":0,"one":0},"modMucMamArchived":{"count":1,"one":0},"modMucMamForwarded":{"count":0,"one":0},"modMucMamLookups":{"count":0,"one":0},"modMucMamMultiplePurges":{"count":0,"one":0},"modMucMamPrefsGets":{"count":0,"one":0},"modMucMamPrefsSets":{"count":0,"one":0},"modMucMamSinglePurges":{"count":0,"one":0},"modPresenceSubscriptions":{"count":1,"one":0},"modPresenceUnsubscriptions":{"count":0,"one":0},"modPrivacyGets":{"count":2,"one":0},"modPrivacyPush":{"count":2,"one":0},"modPrivacySets":{"count":0,"one":0},"modPrivacySetsActive":{"count":0,"one":0},"modPrivacySetsDefault":{"count":0,"one":0},"modPrivacyStanzaAll":{"count":257,"one":10},"modPrivacyStanzaBlocked":{"count":0,"one":0},"modPrivacyStanzaDenied":{"count":0,"one":0},"modRegisterCount":{"count":0,"one":0},"modRosterGets":{"count":9,"one":0},"modRosterPush":{"count":2,"one":0},"modRosterSets":{"count":0,"one":0},"modUnregisterCount":{"count":0,"one":0},"offline_groupchat_message_hook":{"count":0,"one":0},"offline_message_hook":{"count":0,"one":0},"privacy_get_user_list":{"count":8,"one":0},"privacy_updated_list":{"count":0,"one":0},"resend_offline_messages_hook":{"count":11,"one":0},"roster_get_jid_info":{"count":0,"one":0},"roster_get_subscription_lists":{"count":18,"one":0},"roster_get_versioning_feature":{"count":9,"one":0},"roster_in_subscription":{"count":1,"one":0},"roster_out_subscription":{"count":1,"one":0},"sessionAuthAnonymous":{"count":0,"one":0},"sessionAuthFails":{"count":7,"one":0},"sessionCount":{"value":5,"ms_since_reset":10809836},"sessionLogouts":{"count":4,"one":0},"sessionSuccessfulLogins":{"count":9,"one":0},"session_cleanup":{"count":0,"one":0},"set_vcard":{"count":0,"one":0},"skip":{"count":878,"one":34},"sm_broadcast":{"count":2,"one":0},"unset_presence_hook":{"count":7,"one":0},"user_ping_timeout":{"count":0,"one":0},"xmppErrorIq":{"count":8,"one":0},"xmppErrorMessage":{"count":0,"one":0},"xmppErrorPresence":{"count":0,"one":0},"xmppErrorTotal":{"count":8,"one":0},"xmppIqReceived":{"count":72,"one":0},"xmppIqSent":{"count":70,"one":0},"xmppMessageBounced":{"count":0,"one":0},"xmppMessageReceived":{"count":2,"one":0},"xmppMessageSent":{"count":1,"one":0},"xmppPresenceReceived":{"count":51,"one":6},"xmppPresenceSent":{"count":38,"one":4},"xmppStanzaCount":{"count":353,"one":14},"xmppStanzaDropped":{"count":0,"one":0},"xmppStanzaReceived":{"count":125,"one":6},"xmppStanzaSent":{"count":109,"one":4}}}
    erb :index
  end
end
